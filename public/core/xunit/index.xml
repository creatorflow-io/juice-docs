<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>xUnit :: Juice's documentation</title><link>https://juice-docs.creatorflow.io/core/xunit/index.html</link><description>Dependency Injection
Logging
Priority
CI-Ignore</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Tue, 11 Apr 2023 17:21:32 +0700</lastBuildDate><atom:link href="https://juice-docs.creatorflow.io/core/xunit/index.xml" rel="self" type="application/rss+xml"/><item><title>Dependency Injection</title><link>https://juice-docs.creatorflow.io/core/xunit/di/index.html</link><pubDate>Tue, 11 Apr 2023 16:57:00 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/xunit/di/index.html</guid><description>To run complex unit tests with a full dependency injection pattern, we provide a simple DependencyResolver.
using Juice.Extensions.DependencyInjection; ... var resolver = new DependencyResolver { CurrentDirectory = AppContext.BaseDirectory }; resolver.ConfigureServices(services => { var configService = services.BuildServiceProvider().GetRequiredService&lt;IConfigurationService>(); // IConfigurationRoot var configuration = configService.GetConfiguration(args); // configure options // register services }); // access IServiceProvider var serviceProvider = resolver.ServiceProvider;The library can be accessed via Nuget:</description></item><item><title>Logging</title><link>https://juice-docs.creatorflow.io/core/xunit/logging/index.html</link><pubDate>Tue, 04 Apr 2023 16:08:17 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/xunit/logging/index.html</guid><description>Sometimes we want to show the app logs in unit tests for easier debugging. So TestOutputLoggerProvider can help us.
using Juice.Extensions.DependencyInjection; using Microsoft.Extensions.Logging; ... var builder = new DependencyResolver(); builder.ConfigureServices(services => { var configService = services.BuildServiceProvider().GetRequiredService&lt;IConfigurationService>(); var configuration = configService.GetConfiguration(); services.AddLogging(builder => { builder.ClearProviders() .AddTestOutputLogger() .AddConfiguration(configuration.GetSection("Logging")); }); // must register an instance of ITestOutputHelper services.AddSingleton(_output); // configure other services ... });The library can be accessed via Nuget:</description></item><item><title>Priority</title><link>https://juice-docs.creatorflow.io/core/xunit/priority/index.html</link><pubDate>Tue, 11 Apr 2023 17:20:57 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/xunit/priority/index.html</guid><description>Here is an approach for in-order testing.
First, we add the [TestCaseOrderer] attribute to the xUnit test class then add the [TestPriority] attribute to the test method. The test method with higher Priority will run first.
using Juice.XUnit; [TestCaseOrderer("Juice.XUnit.PriorityOrderer", "Juice.XUnit")] public class EFTest { [Fact(TestPriority(99)] public async Task Shoud_run_first() { } [Fact(TestPriority(98)] public async Task Shoud_run_second() { } }The library can be accessed via Nuget:</description></item><item><title>CI-Ignore</title><link>https://juice-docs.creatorflow.io/core/xunit/ci_ignore/index.html</link><pubDate>Tue, 11 Apr 2023 17:21:32 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/xunit/ci_ignore/index.html</guid><description>Some special tests require special conditions so we have to ignore them in the CI test. So we can add [IgnoreOnCIFact] or [IgnoreOnCITheory] attribute to specified tests to bypass.
using Juice.XUnit; public class EFTest { [IgnoreOnCIFact(TestPriority(99)] public async Task Shoud_run_first() { } [IgnoreOnCITheory(TestPriority(98)] [InlineData("SqlServer")] [InlineData("PostgreSQL")] public async Task Shoud_run_second(string provider) { } }The library can be accessed via Nuget:</description></item></channel></rss>
<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Core features :: Juice's documentation</title><link>https://juice-docs.creatorflow.io/core/index.html</link><description>Logging
Configuration
Options
Swagger
Messaging
Mediator
Event bus
Entity framework
Integration services
xUnit
Multi-tenant
Modular</description><generator>Hugo</generator><language>en-us</language><lastBuildDate>Thu, 19 Feb 2026 00:00:00 +0000</lastBuildDate><atom:link href="https://juice-docs.creatorflow.io/core/index.xml" rel="self" type="application/rss+xml"/><item><title>Overview</title><link>https://juice-docs.creatorflow.io/core/overview/index.html</link><pubDate>Sun, 02 Apr 2023 10:19:56 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/overview/index.html</guid><description>In this chapter, we will look at common components and extensions:
Logging Options Configuration Swagger MediatR Event bus Integration service Multi-tenant Audit XUnit Modular We implemented these extensions and services to resolved common problems that were specified in Application models section. To achieve more value out of this document, please go through .NET Microservices: Architecture for Containerized .NET Applications.
NOTE: Juice is currently in beta, so you must select the Include prerelease checkbox in the Nuget packages window to browse its packages.</description></item><item><title>Logging</title><link>https://juice-docs.creatorflow.io/core/logging/index.html</link><pubDate>Mon, 03 Apr 2023 20:22:47 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/logging/index.html</guid><description>Versionslatest7.0.2There are many great logging frameworks for .Net Core like Log4Net, SeriLog, NLog… However, if you wish to customize logging system for special purpose, then you can inherit the LoggerProvider abstract class:</description></item><item><title>Configuration</title><link>https://juice-docs.creatorflow.io/core/configuration/index.html</link><pubDate>Mon, 03 Apr 2023 20:23:10 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/configuration/index.html</guid><description>Per-tenant configuration If you are trying to develop a multi-tenant application, you may need to access the tenant configuration. So we provide ITenantsConfiguration interface to access tenant configuration and a default JSON configuration source that will read configuration from {ConfigurationDirectory}/tenants/{TenantIdentifier}/{FileName}.
public interface ITenantsConfiguration : IConfiguration { }The ITenantsConfiguration is inherited from IConfiguration. So after registering the service on application startup you can inject it and use like IConfiguration.</description></item><item><title>Options</title><link>https://juice-docs.creatorflow.io/core/options/index.html</link><pubDate>Mon, 03 Apr 2023 20:22:57 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/options/index.html</guid><description>Mutable Options To change options in the application, we can use IOptionsMutable&lt;T> interface:
public interface IOptionsMutable&lt;out T> : IOptionsSnapshot&lt;T> where T : class, new() { // Update T field by field Task&lt;bool> UpdateAsync(Action&lt;T> applyChanges); }To use IOptionsMutable&lt;T> we must also register some required services.
... using Juice.Extensions.Options.DependencyInjection; ... // your changed options will be write to {WorkingDirectory}/appsettings.Development.json services.UseOptionsMutableFileStore("appsettings.Development.json"); // OR separated appsettings file for strongly typed // services.UseOptionsMutableFileStore&lt;Options>($"appsettings.Separated.Development.json"); // configure your Options class before use services.ConfigureMutable&lt;Options>(configuration.GetSection("Options"));After that, we can inject IOptionsMutable&lt;Options> and use it like IOptionsSnapshot&lt;Options>. We can also call UpdateAsync method to update options.</description></item><item><title>Swagger</title><link>https://juice-docs.creatorflow.io/core/swagger/index.html</link><pubDate>Mon, 03 Apr 2023 20:23:38 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/swagger/index.html</guid><description>Include XML comments This is a SwaggerGenOptions’ extension to include xml comments from referenced assemblies.
... using Juice.Extensions.Swagger; ... services.ConfigureSwaggerGen(c => { ... c.IncludeReferencedXmlComments(); });The library can be accessed via Nuget:
Juice.AspNetCore SwaggerIgnoreFilter To ignore model properties from Swagger document generator but keep it in serialized JSON, we implement ApiIgnoreAttribute and ISchemaFilter interface to remove properties those have ApiIgnoreAttribute from OpenApiSchema</description></item><item><title>Messaging</title><link>https://juice-docs.creatorflow.io/core/messaging/index.html</link><pubDate>Thu, 19 Feb 2026 00:00:00 +0000</pubDate><guid>https://juice-docs.creatorflow.io/core/messaging/index.html</guid><description>Juice v9 unifies all message types under a single IMessage hierarchy and introduces a MessagingBuilder entry point that composes the outbox, delivery, idempotency, and broker layers with a single services.AddMessaging() call.
IMessage Hierarchy Every message type in Juice v9 — MediatR commands, domain events, and integration events — implements IMessage, giving them a shared identity (MessageId, CreatedAt, TenantId).
IMessage├── MessageId : Guid├── CreatedAt : DateTimeOffset└── TenantId : string?IEvent : IMessage└── EventName : stringIIntegrationEvent : IEvent ← required only on the CONSUMING side└── (marker — enables dispatcher routing)MessageBase (abstract record) : IMessage└── MessageId = Guid.NewGuid(), CreatedAt = UtcNow (defaults)IntegrationEvent (abstract record) : MessageBase, IIntegrationEvent└── EventName → GetType().Name (default) ← optional to customizing the routing key on the PRODUCER sidePublish vs. Consume roles Role Type required Reason Publishing (outbox staging) Any IMessage Outbox accepts any message including plain domain events Consuming (broker dispatch) Must implement IIntegrationEvent IntegrationEventDispatcher uses EventName + type registry to deserialize and route from raw bytes Key insight: A plain domain event (IMessage) can be published and delivered through the outbox without ever implementing IIntegrationEvent if you do not want to customizing the event name. Only services that need to receive it via broker infrastructure must use IIntegrationEvent.</description></item><item><title>Mediator</title><link>https://juice-docs.creatorflow.io/core/mediator/index.html</link><pubDate>Mon, 03 Apr 2023 20:23:50 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/mediator/index.html</guid><description>MediatR provides three in-process messaging patterns. In Juice v9 all three can extend MessageBase so every message carries MessageId, CreatedAt, and TenantId automatically.
Pattern Interface Handler interface Use when Request/Response IRequest&lt;TResponse> IRequestHandler&lt;T, TResponse> Command or query — exactly one handler, returns a result Notification INotification INotificationHandler&lt;T> In-process fan-out — multiple handlers, no return value Stream Request IStreamRequest&lt;TResponse> IStreamRequestHandler&lt;T, TResponse> Async streaming — handler yields items one at a time NuGet Package Package Purpose MediatR Core MediatR library Juice.MediatR.Behaviors IdempotencyRequestBehavior&lt;,>, TransactionBehavior&lt;,,> Juice.MediatR.Contracts IIdempotentRequest interface Request / Response — Commands and Queries A request routes to exactly one handler and always returns a result. Use it for commands (state-changing operations) and queries (read-only operations).</description></item><item><title>Event bus</title><link>https://juice-docs.creatorflow.io/core/eventbus/index.html</link><pubDate>Mon, 03 Apr 2023 20:23:59 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/eventbus/index.html</guid><description>ℹ v9 update This feature has been updated in Juice v9. See Messaging for the current API. The original v8.5.0 content is preserved here.
Versionslatest7.xTo communicate between services we defined an IEventBus interface with a built-in RabbitMQ broker. Please follow up Implementing event-based communication between microservices for details.</description></item><item><title>Entity framework</title><link>https://juice-docs.creatorflow.io/core/entityframework/index.html</link><pubDate>Tue, 11 Apr 2023 09:01:19 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/entityframework/index.html</guid><description>DbContextBase We resolved Audit, UnitOfWork and dynamic schema problems with an abstract DbContext that implemented these interfaces:
IAuditableDbContext IUnitOfWork IScehmaDbContext We’ll explain these interfaces below, but remember to call ConfigureServices( serviceProvider ) for your legacy DbContext in two ways:
Inside constructor // call inside constructor public TimerDbContext(IServiceProvider serviceProvider, DbContextOptions&lt;TimerDbContext> options) : base(options) { ConfigureServices(serviceProvider); }Or inside context factory if you are using pooled DbContext public class TimerDbContextScopedFactory : IDbContextFactory&lt;TimerDbContext> { private readonly IDbContextFactory&lt;TimerDbContext> _pooledFactory; private readonly IServiceProvider _serviceProvider; public TimerDbContextScopedFactory( IDbContextFactory&lt;TimerDbContext> pooledFactory, IServiceProvider serviceProvider) { _pooledFactory = pooledFactory; _serviceProvider = serviceProvider; } public TimerDbContext CreateDbContext() { var context = _pooledFactory.CreateDbContext(); context.ConfigureServices(_serviceProvider); return context; } }Then register PooledDbContext</description></item><item><title>Integration service</title><link>https://juice-docs.creatorflow.io/core/integration/index.html</link><pubDate>Mon, 03 Apr 2023 20:24:09 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/integration/index.html</guid><description>ℹ v9 update This feature has been updated in Juice v9. See Messaging for the current API. The original v8.5.0 content is preserved here.
Integration event service In the IntegrationEventLog section, we talked about atomicity and resiliency when publishing to the event bus, followed by each step of the process. In this section, we will package the steps of publishing events and updating event states into IIntegrationEventService service, and then combine them with MediatR behavior for transaction processing.</description></item><item><title>xUnit</title><link>https://juice-docs.creatorflow.io/core/xunit/index.html</link><pubDate>Mon, 03 Apr 2023 20:24:31 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/xunit/index.html</guid><description>Dependency Injection
Logging
Priority
CI-Ignore</description></item><item><title>Multi-tenant</title><link>https://juice-docs.creatorflow.io/core/multitenant/index.html</link><pubDate>Mon, 03 Apr 2023 20:24:21 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/multitenant/index.html</guid><description>MultiTenant This core feature is useful to verify other core features that we have built because it is developed as a microservice. It’s integrated with Finbuckle to identity the tenant. We provide multiple choices for tenant data store:
File store EFCore store gRPC store We also provide the gRPC API to manage tenant information and tenant settings, so MultiTenant itself is a service with the full implementation of:
MultiTenant DBContext UnitOfWork pattern Audit gRPC API DDD/CQRS and Domain Events pattern Integration with event bus Per-tenant configuration/options xUnit helper To use multi-tenant, we must register services with Tenant type</description></item><item><title>Modular</title><link>https://juice-docs.creatorflow.io/core/modular/index.html</link><pubDate>Fri, 14 Apr 2023 15:36:00 +0700</pubDate><guid>https://juice-docs.creatorflow.io/core/modular/index.html</guid><description>This small feature is useful for build a monolithic application from multiple separated features. Developers can register services and configure their modules by themselves.
Firstly, you need to implement the class that inherits from ModuleStartup for your features.
using Juice.Modular; ... namespace Juice.Test { [Feature(Required = true)] public class TestModuleStartup : ModuleStartup{ // override ConfigureServices public override void ConfigureServices(IServiceCollection services, IMvcBuilder mvc, IWebHostEnvironment env, IConfigurationRoot configuration) { // configure your services } // override Configure public override void Configure(IApplicationBuilder app, IEndpointRouteBuilder routes, IWebHostEnvironment env) { // configure application pipeline } // override OnShutdown public override void OnShutdown(IServiceProvider serviceProvider, IWebHostEnvironment env) { // release resources } } }The Feature attribute’s arguments:</description></item></channel></rss>